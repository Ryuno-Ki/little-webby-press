{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "..\\..\\Press.svelte"
  ],
  "sourcesContent": [
    "<script>\r\n\timport Tabs from \"./Tabs.svelte\"\r\n\timport { getFilesFromDataTransferItems } from \"datatransfer-files-promise\"\r\n\timport { onMount } from \"svelte\"\r\n\timport { bookFromFiles } from \"./book.js\"\r\n\timport { _ } from \"svelte-i18n\"\r\n\r\n\tlet stage = \"waiting\" // loading, loaded, over\r\n\tlet msg, files, book\r\n\tlet error = false\r\n\r\n\tfunction readFile(file) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tvar fr = new FileReader()\r\n\t\t\tfr.onload = () => {\r\n\t\t\t\tresolve(fr.result)\r\n\t\t\t}\r\n\t\t\tfr.readAsText(file.blob)\r\n\t\t})\r\n\t}\r\n\r\n\tonMount(() => {\r\n\t\tconst dropzone = document.querySelector(\".drop-area\")\r\n\t\tdropzone.addEventListener(\"dragover\", evt => {\r\n\t\t\tevt.preventDefault()\r\n\t\t\tstage = \"over\"\r\n\t\t})\r\n\t\tdropzone.addEventListener(\"dragleave\", evt => {\r\n\t\t\tevt.preventDefault()\r\n\t\t\tstage = \"waiting\"\r\n\t\t})\r\n\t\tdropzone.addEventListener(\"drop\", async evt => {\r\n\t\t\tevt.preventDefault()\r\n\r\n\t\t\tmsg = $_(\"getting-file-list\")\r\n\t\t\tstage = \"loading\"\r\n\t\t\tfiles = await window.getFilesFromDataTransferItems(evt.dataTransfer.items)\r\n\r\n\t\t\tmsg = $_(\"loading-configuration\")\r\n\t\t\tbook = await bookFromFiles(files)\r\n\t\t\tif (book instanceof Error) {\r\n\t\t\t\tstage = \"error\"\r\n\t\t\t\tmsg = book.message\r\n\t\t\t} else {\r\n\t\t\t\tstage = \"loaded\"\r\n\t\t\t}\r\n\t\t})\r\n\t})\r\n</script>\r\n\r\n<style>\r\n\t.over {\r\n\t\tborder: solid 4px #e3f2fd;\r\n\t}\r\n\r\n\t.full-height {\r\n\t\theight: calc(100vh - 48px);\r\n\t}\r\n</style>\r\n\r\n<div class=\"container p-0 mx-auto full-height drop-area\">\r\n\t{#if error}\r\n\t\t<div\r\n\t\t\tclass=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\r\n\t\t\trelative\"\r\n\t\t\trole=\"alert\">\r\n\t\t\t<strong class=\"font-bold\">{$_('error-quip')}</strong>\r\n\t\t\t<span class=\"block sm:inline\">{error}</span>\r\n\t\t\t<span class=\"absolute top-0 bottom-0 right-0 px-4 py-3\">\r\n\t\t\t\t<svg\r\n\t\t\t\t\tclass=\"fill-current h-6 w-6 text-red-500\"\r\n\t\t\t\t\trole=\"button\"\r\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\tviewBox=\"0 0 20 20\">\r\n\t\t\t\t\t<title>{$_('close')}</title>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=\"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2\r\n\t\t\t\t\t\t1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1\r\n\t\t\t\t\t\t1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758\r\n\t\t\t\t\t\t3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z\" />\r\n\t\t\t\t</svg>\r\n\t\t\t</span>\r\n\t\t</div>\r\n\t{/if}\r\n\t{#if stage !== 'loaded'}\r\n\t\t<div\r\n\t\t\tclass=\"flex justify-center content-center h-100 text-center\"\r\n\t\t\tclass:over={stage == 'over'}>\r\n\t\t\t{#if stage == 'over'}\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div class=\"empty-icon\">\r\n\t\t\t\t\t\t<i class=\"fas fa-smile-wink fa-3x\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<p class=\"text-xl\">{$_('drop-a-book-folder-here')}</p>\r\n\t\t\t\t</div>\r\n\t\t\t{:else if stage == 'waiting'}\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div class=\"empty-icon\">\r\n\t\t\t\t\t\t<i class=\"fas fa-book fa-3x\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<p class=\"text-xl\">{$_('no_book')}</p>\r\n\t\t\t\t\t<p class=\"text-light\">{$_('drag-and-drop-to-start')}</p>\r\n\t\t\t\t\t<div class=\"mt-6\">\r\n\t\t\t\t\t\t<a class=\"btn btn-blue\" href=\"/help\">\r\n\t\t\t\t\t\t\tLearn more about how to build books using\r\n\t\t\t\t\t\t\t<em>little.webby.press</em>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t{:else if stage == 'loading'}\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div class=\"empty-icon\">\r\n\t\t\t\t\t\t<i class=\"fas fa-spinner fa-3x fa-spin\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<p class=\"text-xl\">{$_('loading')}</p>\r\n\t\t\t\t\t<p class=\"text-light\">{msg}</p>\r\n\t\t\t\t</div>\r\n\t\t\t{/if}\r\n\t\t</div>\r\n\t{:else}\r\n\t\t<Tabs {book} />\r\n\t{/if}\r\n</div>\r\n"
  ],
  "names": [],
  "mappings": "AAmDC,KAAK,eAAC,CAAC,AACN,MAAM,CAAE,KAAK,CAAC,GAAG,CAAC,OAAO,AAC1B,CAAC,AAED,YAAY,eAAC,CAAC,AACb,MAAM,CAAE,KAAK,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,AAC3B,CAAC"
}